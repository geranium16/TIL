

# SpringBoot 



> 1. https://spring.io/tools
>
> 2. 다운로드폴더->파일->파워쉘열기 (압출풀기)
>
>    ->java -jar sp [tab]키 //안되면 java 환경변수가 지정안되있는 것 (환경변수 설정 or 밑에 결로 입력)
>
>    ->C:\Program Files\ojdkbuild\java-1.8.0-openjdk-1.8.0.232-1\bin\java 입력
>
> 3. SpringToolsuite4  -->dev에 설치
>
> 4. https://projectlombok.org/all-versions (1.18.10)
>
> 5. Lombok :  클래스에서 각 멤버변수를 접근할수 있는 (각 요소들이 private 접근권한을 가지고 있을때) method 를 만들게 된다.  이 것을 자동으로 만들어준다.
>
> 6. java -jar lom[tab]->springboot.exe파일 등록 (C:\dev\sts-4.5.0.RELEASE 안에 springtoolsuite4)
>
> 7. create new spring starter project
>
> 8. name:basic   type: gradle(3.x) group: 주소명 거꾸로 com.daehyeon package: com.daehyeon.basic
>
> 9. Lombok / Spring Data JPA / H2 Database / Thymeleaf / Spring Web (5개) 추가
>
>    - database 지식이 없기 때문에 경량화 데이터베이스 H2,jpa사용
>
>    - HTML , CSS 를 쉽게 Thymeleaf 사용
>
>    - lombok 편하게 하기위해
>
>    - web을 만들기 위해 spring web
>
>       ---> pip같이 처음에 다 다운로드하는 것이 아닌 필요할 때 입력해서 다운로드
>
>    ​	--> 이러한 기술 : java에선 grdlew , maven
>
> 10. ctrl+f11 : 런(실행) : 3번 런 시키면 3개 실행 --> 할 때마다 정지시켜야한다.
>
> 11. 오류뜨면 : gradlew -> refresh
>
> 12. 

### Logger

> //	내용을 파일에 저장 
> //	system.out보다 속도가 빠르다. (출력속도가 빠르다.)
> //	log 관리가 쉽다. (파일등을 이용하여 관리가 용이함.).

개발을 하다가 어떤 변수의 값을 확인하고 싶으면 자연스럽게 System.out.println()으로 출력을 하는데 구체적으로는 **프로그램 개발이나 운영 시 발생하는 문제점을 추적 하거나 운영 상태를 모니터링 하는 정보**를 기록하는 것이이다. 또한 **분석을 통해 통계**를 낼 수도 있기 때문에 기록을 남기는 것은 중요하다.

하지만 로그를 남기면 성능이 나빠진다는 단점이 있는데, 그 보다 로그를 통해 얻는 정보가 훨씬 많기 때문에 필요한 부분에 파일로써 로그를 남기는 것이 중요하다.

예전에는 스프링에서 로그를 남길 때 **Log4J**를 사용했었는데, 성능 및 기능상의 이유로 대체 logger들이 많아졌고, 현재 대부분은 **SLF4J** 인터페이스를 구현한 **Logback**을 사용한다.

--> 현재 따로 파일로 저장 안했엇음

### application.properties

> 스프링 부트는 외부 설정을 통해 스프링 부트 어플리케이션의 환경설정 혹은 설정값을 정할 수 있습니다. 스프링 부트에서 사용할 수 있는 외부 설정은 크게 **properties, YAML, 환경변수, 커맨드 라인 인수** 등이 있다.

``` java
# log level
logging.level.com.daehyeon.basic=trace // log를 trace 단계까지 출력 

```

###  Build Tool 

- 늘어나는 라이브러리 자동 추가, 동기, 관리 ( maven, gradle )

- gradle(Build Tool) : 프로젝트를 진행하면서 많은 라이브러리를 직접사이트에서 다운로드 받아 추가하지 않고 쉽게 다운로드, 동기화하며 라이브러리를 관리해주는 도구 

- build.gradle -> 라이브러리 다 들어 있음

build.gradle

``` java
implementation "org.springframework.boot:spring-boot-devtools" //서버 재기동없이 수정사항 적용
//런-정지-런-정지 할필요없다.
```

STS 인코딩 설정 변경

- Window -> preference -> encoding 검색 ->workspace ->content type을 제외한 utf-8설정



> 







//info 까지만 나오는 것을 trace까지 찍게해준다.



dev-tools

SpringBoot DevTools 

- 서버 재기동없이 수정사항 적용(추가함으로써 런 종료 런 종료 할 필요없이 저장으로 동기화가능)

- implementation "org.springframework.boot:spring-boot-devtools"



### 응답처리

> 서버가 제공하는 응답(보여줄 수 있는 정보)가 HTML,JSON,EXCEL,PDF 여러가지 자료가 있다.
>
>  String / void / Map / Model / ModelAndView / DTO으로 정보를 요청하면 HTML로 정보를 준다.
>
> Map/DTO/List로 요청하면 JSO으로 응답을 준다.





### Object

``` java
	@GetMapping("html/object") //주소연결 templates.html패키지 만들어서 object.html에 넣는다
	public Member htmlObject() {
		Member member = new Member();
		member.setName("kim");
		return member; //html에 member 객체 넘겨준다.
//		원래 롬복을 안쓰면 안넘어가진다. 왜냐면 get,setmethod가 없기 때문에
//		private변수에 접근 불가
	}	
```

1. 나머지 4개는 기본 제공 라이브러리 Lombok은 기본제공 안된다???
2. template.html??   templates 패키지?? 다른 의미???





* ... -> package presentation -> hierachicl : templates ->html 하위 패키지로 내려감

​        :  templates.html 이란 입력 자체가 templates 밑에 있는 html 패키지라는 뜼



- ResponseBody가 붙어있을 때  json형식으로 데이터 전달 따라서 html이 필요없어진다. 어차피 jso형식으로 전달 출력하기 때문에 html을 아예 안쓴다.



### #.templates

- 정보가 전달되는? 형식포맷을 자동으로 맞춰서  



`shift+ctrl+O`: 패키지가 다른 상태에서 알아서 패키지맞춰주고 import

`shift+ctrl+F`: 정렬

"get"을 제외한 "post"같은 것은 우리가 지끔껏 해온 호출방식 불가 

http://localhost:8080/req/post 방식 불가

브라우저에서 호출방식은 무조건 get이다.

따라서 이떄 restritght 사용

여기서 http://localhost:8080/req/post 입력했을 때 200이 뜬거면 제대로 된것





* 코드이해

``` java
@GetMapping("html/string") // http://localhost:8080/html/object연결시 이 함수로 읻동
	public Member htmlObject() {
		Member member = new Member();
		member.setName("kim");
		return member; //객체를 리턴해준다. 그러나 여기서 object.html로 연결되지 않는다.
       // "object.html" string형식으로 되어야 object.html로 가진다.
       // 그냥 객체를 넘겨주면 어디 html로 갈지 모르기때문에 mapping해준 html/string로간		//다.
	}	

```



``` java
//	둘다 쓰는거 아니다. 둘중 하나만 쓰늗네 postmapping이 요즘방식
	@PostMapping("req/post")
	@RequestMapping(value = "req/post", method = RequestMethod.POST)
```



modelattribute : 

HttpServletRequest : HttpServletRequest이 ㄹㅇ java request   param과 model은 이를 가공해서 spring이 만든 것

-> requestparam : 사용자가 얼마나 두던 서버가 알아서 처리 (일반 유저들이 사용) =편리함



정리

1.html 로 넘겨줄꺼냐 json으로 넘길꺼냐 restcontroller

2.requestparam / pathvariable

요청=post,get으로 url!

parameter를 넘기고 받을 떄는 requestparam이 있어야한다. 

### #.요청처리

#### RequestParam (편리함)



param 2개

1. key라는 녀셕이 있따다., 1개짜리 자료형만 사용
2. key없다.  아무 자료형이나 사용
3. int page만 적어도 알아서 key가 page로 만들어짐



사이트 rest가 적용되는 방식:  주소가 깔끔하게 뜻이 나타나게 정리 ( 짜는 법이나 이런건 안알려줌)

--> pathvariable로 가능

#### PathVariable

- 요청을 처리하는 주소에 {변수명} 형식으로 지정

- @PathVariable을 이용하여 {변수명} 과 동일한 명칭 지정 후 변수 사용

- 명칭 미지정 시 순서대로 입력 ● controller/RequestController.java

  --> 사이트 rest가 적용되는 방식:  주소가 깔끔하게 뜻이 나타나게 정리 가능

#### ModelAttribute (명확함)

- Model에 작성되어 있는 변수/자료형과 파라미터명이 동일하면 자동으로 대입
- 파라미터가 딱 객체의 변수 이름과 같아야한다.

``` java
<Member.java>
private String userId;
 private String userPw;
// userId, userPw와 같은 것만 사용 가능
<RequestController.java>
// member.java에 선언된 객체 변수만 가능
//	http://localhost:8080/req/model?name=11&userId=22&userPassword=33
	@GetMapping("req/model")
	public String model(@ModelAttribute Member member) {
		return member.toString();
	}
```

### #. HTML Template-Thymeleaf

>- 스프링 부트에서 권장하는 HTML Template 
>-  HTML5 문법을 사용하는 HTML 태그 및 속성 기반의 Template Engine 
>-  텍스트, HTML, XML, JavaScript, CSS 등 생성 가능 
>-  Controller에서 View로 넘겨준 Model을 이용하여 데이터 출력
>
>----> Controller에서 생성한 데이터를 담아서 View로 전달할 때 사용하는 객체
>
>즉 Model의 의미 = 1. 다양한 변수들을 저장할 수 있는 역활 2.View로 전달할 수 있는 역활

``` java
package com.daehyeon.basic.controller;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

import com.daehyeon.basic.model.Member;

@Controller
public class WelcomeController {
	@GetMapping("/html/welcome")
	public String welcome(Model model) { //Model은 아무거나 다 넣을 수 있는 변수
		List<String> list = new ArrayList<>();
		list.add("list1");
		list.add("list2");
		model.addAttribute("list", list);
		//"list"라는 이름으로 list를 html에서 사용하겠따.
		Map<String, Object> map = new HashMap<>();
		map.put("key1", "map1");
		map.put("key2", "map2");
		model.addAttribute("map", map);
		
		Member member = new Member();
		member.setUserId("a");
		member.setName("spring");
		member.setUserPassword("1234");
		
		model.addAttribute("member", member);
		model.addAttribute("message", "thymeleaf");
		
		return "/html/welcome";
	}
}
```

``` html
//thymeleaf는 [[$]] 이러한 형식을 제공해서 map이 가지고 있는 자료형들을 사용할 수 있따.
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
	<h1>List</h1>
	<h3>[[${list}]]</h3>
	<h3>[[${list[0]}]]</h3>
	<h1>Map</h1>
	<h3>[[${map}]]</h3>
	<h3>[[${map.key1}]]</h3>
	<h3>[[${map['key2']}]]</h3>
	<h1>Member</h1>
	<h3>[[${member}]]</h3>
	<h3>[[${member['userId']}]]</h3>
	<h3>[[${member.userPassword}]]</h3>
	<h1>Message</h1>
	<h3>[[${message}]]</h3>
</body>
</html>
```

``` html
<!DOCTYPE html>
<html>
//<html xmlns:th="http://www.thymeleaf.org">쓰면 노란줄 삭제
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
아이디:<span>[[${user.userId}]]</span><br>
이름:<span>[[${user.userName}]]</span><br>
나이:<span>[[${user.userAge}]]</span><br>
<hr>

아이디:<span th:text="${user.userId}"></span><br>//제일 권장하는 방식
이름:<span th:text="${user.userName}"></span><br>
나이:<span th:text="${user.userAge}"></span><br>

<hr>
아이디:<span data-th-text="${user.userId}"></span><br>
이름:<span data-th-text="${user.userName}"></span><br>
나이:<span data-th-text="${user.userAge}"></span><br>

```

